{"version":3,"sources":["./src/app/pages/mapa/mapa.page.html","./src/app/pages/mapa/mapa-routing.module.ts","./src/app/pages/mapa/mapa.module.ts","./src/app/pages/mapa/mapa.page.scss","./src/app/pages/mapa/mapa.page.ts"],"names":[],"mappings":"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","file":"pages-mapa-mapa-module-es2015.js","sourcesContent":["export default \"\\r\\n<app-header align=\\\"center\\\" titulo=\\\"Mapa TulcÃ¡n\\\"> </app-header>\\r\\n\\r\\n\\r\\n\\r\\n<ion-content class=\\\"noScroll\\\">\\r\\n  \\r\\n\\r\\n  <div id='map' ></div>\\r\\n\\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { MapaPage } from './mapa.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: MapaPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class MapaPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { MapaPageRoutingModule } from './mapa-routing.module';\r\n\r\nimport { MapaPage } from './mapa.page';\r\nimport { ComponentsModule } from '../../components/components.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    MapaPageRoutingModule,\r\n    ComponentsModule\r\n  ],\r\n  declarations: [MapaPage]\r\n})\r\nexport class MapaPageModule {}\r\n","export default \"#map {\\n  width: 100% !important;\\n  height: 100% !important;\\n  background-color: #f6f6f4;\\n}\\n\\n.noScroll {\\n  overflow: hidden;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbWFwYS9DOlxcSU9OSUM1XFxWaXZlVHVsY2FuXFxWaXZlVHVsY2FuL3NyY1xcYXBwXFxwYWdlc1xcbWFwYVxcbWFwYS5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL21hcGEvbWFwYS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxzQkFBQTtFQUNBLHVCQUFBO0VBQ0EseUJBQUE7QUNDSjs7QURFQTtFQUNJLGdCQUFBO0FDQ0oiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9tYXBhL21hcGEucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI21hcHtcclxuICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7XHJcbiAgICBoZWlnaHQ6IDEwMCUgIWltcG9ydGFudDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmNmY2ZjQ7XHJcbn1cclxuXHJcbi5ub1Njcm9sbCB7XHJcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgfSIsIiNtYXAge1xuICB3aWR0aDogMTAwJSAhaW1wb3J0YW50O1xuICBoZWlnaHQ6IDEwMCUgIWltcG9ydGFudDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y2ZjZmNDtcbn1cblxuLm5vU2Nyb2xsIHtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\r\nimport * as mapboxgl from 'mapbox-gl';\r\nimport { EstablecimientosService } from '../../services/establecimientos.service';\r\nimport { RespEstablecimientos, RespAtractivos } from '../../interfaces/interfaces';\r\n\r\ndeclare var mapboxgl: any;\r\n\r\n@Component({\r\n  selector: 'app-mapa',\r\n  templateUrl: './mapa.page.html',\r\n  styleUrls: ['./mapa.page.scss'],\r\n})\r\nexport class MapaPage implements OnInit {\r\n\r\n  listadoLugares : RespEstablecimientos[] = [];\r\n  listadoAtractivos: RespAtractivos[] = [];\r\n\r\n  array: [] = [];\r\n\r\n  constructor(private establecimientoService : EstablecimientosService) {\r\n\r\n  }\r\n\r\n    \r\n  ngOnInit() {\r\n\r\n    mapboxgl.accessToken = 'pk.eyJ1IjoiYnJpYW5ndGkiLCJhIjoiY2tiMzF2OGw5MDJwZjJzcWNwZHJoNXJyZiJ9.lDnbCNeuM2PZ8iWTKr4TzQ';\r\n    const map = new mapboxgl.Map({\r\n      container: 'map',\r\n      style: 'mapbox://styles/mapbox/streets-v11',\r\n      center: [-77.72006049593814, 0.8104170982511971],\r\n      zoom: 14,\r\n    });\r\n\r\n    map.addControl(\r\n      new mapboxgl.GeolocateControl({\r\n      positionOptions: {\r\n      enableHighAccuracy: true\r\n      },\r\n      trackUserLocation: true\r\n      })\r\n    );\r\n\r\n    map.on('load', () => {\r\n      map.resize();\r\n      map.addControl(new mapboxgl.NavigationControl());\r\n    });\r\n\r\n    this.establecimientoService.getEstablecimientos()\r\n    .subscribe( resp => {\r\n        // console.log('Resp',resp );\r\n        this.listadoLugares = resp;\r\n\r\n        for (const lugar of this.listadoLugares){\r\n          \r\n          const lat = Number(lugar.lat);\r\n          const lng = Number(lugar.lng);\r\n\r\n          // console.log(lat);\r\n          // console.log(lng);\r\n          \r\n          const geojson = {\r\n            type: 'FeatureCollection',\r\n            features: [\r\n              {\r\n                type: 'Feature',\r\n                properties: {\r\n                message: 'Foo',\r\n                iconSize: [40, 40],\r\n                categoria: lugar.tipo_establecimiento_id_tipo\r\n                },\r\n                geometry: {\r\n                type: 'Point',\r\n                coordinates: [lng, lat]\r\n                }\r\n              }\r\n            ]\r\n          };\r\n          \r\n\r\n          geojson.features.forEach(function(marker){\r\n\r\n            const icon = document.createElement('div');\r\n            icon.className = 'marker';\r\n            if (lugar.tipo_establecimiento_id_tipo === 1 ) {\r\n              icon.style.backgroundImage = 'url(/assets/pin/hotel.png)';\r\n            }\r\n            if (lugar.tipo_establecimiento_id_tipo === 2 ) {\r\n              icon.style.backgroundImage = 'url(/assets/pin/hostal.png)';\r\n            }\r\n            if (lugar.tipo_establecimiento_id_tipo === 3 ) {\r\n              icon.style.backgroundImage = 'url(/assets/pin/restaurante.png)';\r\n            }\r\n            if (lugar.tipo_establecimiento_id_tipo === 4 ) {\r\n              icon.style.backgroundImage = 'url(/assets/pin/cafeteria.png)';\r\n            }\r\n            if (lugar.tipo_establecimiento_id_tipo === 5 ) {\r\n              icon.style.backgroundImage = 'url(/assets/pin/discoteca.png)';\r\n            }\r\n            if (lugar.tipo_establecimiento_id_tipo === 6 ) {\r\n              icon.style.backgroundImage = 'url(/assets/pin/bar.png)';\r\n            }\r\n            if (lugar.tipo_establecimiento_id_tipo === 7 ) {\r\n              icon.style.backgroundImage = 'url(/assets/pin/complejo.png)';\r\n            }\r\n            \r\n            icon.style.width = marker.properties.iconSize[0] + 'px';\r\n            icon.style.height = marker.properties.iconSize[1] + 'px';\r\n          \r\n            new mapboxgl.Marker(icon).setLngLat(marker.geometry.coordinates)\r\n            .setPopup(new mapboxgl.Popup({ offset: 25 }) // add popups\r\n            .setHTML('<h4>' + lugar.nom_estable + '</h4>' + '<p><b>DirecciÃ³n: </b>' + lugar.direccion + '</p>'\r\n            + '<p><b>Horario: </b>' + lugar.horario + '</p>'))\r\n            .addTo(map);\r\n          });\r\n\r\n        }\r\n    });\r\n\r\n    this.establecimientoService.getatractivos()\r\n    .subscribe(resp => {\r\n      this.listadoAtractivos = resp;\r\n      for (const atractivo of this.listadoAtractivos){\r\n        const lat = Number(atractivo.lat);\r\n        const lng = Number(atractivo.lng);\r\n        \r\n        const geojson = {\r\n          type: 'FeatureCollection',\r\n          features: [\r\n            {\r\n              type: 'Feature',\r\n              properties: {\r\n              message: 'Foo',\r\n              iconSize: [40, 40],\r\n              },\r\n              geometry: {\r\n              type: 'Point',\r\n              coordinates: [lng, lat]\r\n              }\r\n            }\r\n          ]\r\n        };\r\n        \r\n        geojson.features.forEach(function(marker){\r\n          const icon = document.createElement('div');\r\n          icon.className = 'marker';\r\n          icon.style.backgroundImage = 'url(/assets/pin/atractivo.png)';\r\n          icon.style.width = marker.properties.iconSize[0] + 'px';\r\n          icon.style.height = marker.properties.iconSize[1] + 'px';\r\n\r\n          new mapboxgl.Marker(icon).setLngLat(marker.geometry.coordinates)\r\n            .setPopup(new mapboxgl.Popup({ offset: 25 }) // add popups\r\n            .setHTML('<h4>' + atractivo.nombre + '</h4>' + '<p><b>DirecciÃ³n: </b>' + atractivo.direccion + '</p>'\r\n            + '<p><b>Horario: </b>' + atractivo.horario + '</p>'))\r\n            .addTo(map);\r\n        });\r\n\r\n\r\n      }\r\n\r\n    });\r\n\r\n    \r\n\r\n  }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}