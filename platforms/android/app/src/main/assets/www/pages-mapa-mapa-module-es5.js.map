{"version":3,"sources":["src/app/pages/mapa/mapa.page.html","src/app/pages/mapa/mapa-routing.module.ts","src/app/pages/mapa/mapa.module.ts","src/app/pages/mapa/mapa.page.scss","src/app/pages/mapa/mapa.page.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,mBAAA,CAAA,CAAA,CAAA,mBAAA;AAAe;;;AAAA,IAAA,mBAAA,CAAA,SAAA,CAAA,GAAA,uLAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACKf,QAAM,MAAM,GAAW,CACrB;AACE,MAAA,IAAI,EAAE,EADR;AAEE,MAAA,SAAS,EAAE,uCAAA,CAAA,UAAA;AAFb,KADqB,CAAvB;;AAWA,QAAa,qBAAb;AAAA;AAAA,KAAA;;AAAa,IAAA,qBAAqB,GAAA,kCAAA,CAAA,YAAA,CAAA,CAAA,CAJjC,MAAA,CAAA,0CAAA,CAAA,UAAA,CAAA,CAAA,CAAS;AACR,MAAA,OAAO,EAAE,CAAC,4CAAA,CAAA,cAAA,CAAA,CAAa,QAAb,CAAsB,MAAtB,CAAD,CADD;AAER,MAAA,OAAO,EAAE,CAAC,4CAAA,CAAA,cAAA,CAAD;AAFD,KAAT,CAIiC,CAAA,EAArB,qBAAqB,CAArB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACKb,QAAa,cAAb;AAAA;AAAA,KAAA;;AAAa,IAAA,cAAc,GAAA,kCAAA,CAAA,YAAA,CAAA,CAAA,CAV1B,MAAA,CAAA,0CAAA,CAAA,UAAA,CAAA,CAAA,CAAS;AACR,MAAA,OAAO,EAAE,CACP,4CAAA,CAAA,cAAA,CADO,EAEP,2CAAA,CAAA,aAAA,CAFO,EAGP,2CAAA,CAAA,aAAA,CAHO,EAIP,iDAAA,CAAA,uBAAA,CAJO,EAKP,0DAAA,CAAA,kBAAA,CALO,CADD;AAQR,MAAA,YAAY,EAAE,CAAC,uCAAA,CAAA,UAAA,CAAD;AARN,KAAT,CAU0B,CAAA,EAAd,cAAc,CAAd;;;;;;;;;;;;;;;;ACrBb,IAAA,mBAAA,CAAA,CAAA,CAAA,mBAAA;AAAe;;;AAAA,IAAA,mBAAA,CAAA,SAAA,CAAA,GAAA,s+BAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACYf,QAAa,QAAb;AAOE,wBAAoB,sBAApB,EAAoE;AAAA;;AAAhD,aAAA,sBAAA,GAAA,sBAAA;AALpB,aAAA,cAAA,GAA0C,EAA1C;AACA,aAAA,iBAAA,GAAsC,EAAtC;AAEA,aAAA,KAAA,GAAY,EAAZ;AAIC;;AATH;AAAA;AAAA,mCAYU;AAAA;;AAEN,UAAA,QAAQ,CAAC,WAAT,GAAuB,4FAAvB;AACA,cAAM,GAAG,GAAG,IAAI,QAAQ,CAAC,GAAb,CAAiB;AAC3B,YAAA,SAAS,EAAE,KADgB;AAE3B,YAAA,KAAK,EAAE,oCAFoB;AAG3B,YAAA,MAAM,EAAE,CAAC,CAAC,iBAAF,EAAqB,kBAArB,CAHmB;AAI3B,YAAA,IAAI,EAAE;AAJqB,WAAjB,CAAZ;AAOA,UAAA,GAAG,CAAC,UAAJ,CACE,IAAI,QAAQ,CAAC,gBAAb,CAA8B;AAC9B,YAAA,eAAe,EAAE;AACjB,cAAA,kBAAkB,EAAE;AADH,aADa;AAI9B,YAAA,iBAAiB,EAAE;AAJW,WAA9B,CADF;AASA,UAAA,GAAG,CAAC,EAAJ,CAAO,MAAP,EAAe,YAAK;AAClB,YAAA,GAAG,CAAC,MAAJ;AACA,YAAA,GAAG,CAAC,UAAJ,CAAe,IAAI,QAAQ,CAAC,iBAAb,EAAf;AACD,WAHD;AAKA,eAAK,sBAAL,CAA4B,mBAA5B,GACC,SADD,CACY,UAAA,IAAI,EAAG;AACf;AACA,YAAA,KAAI,CAAC,cAAL,GAAsB,IAAtB;;AAFe,uDAIK,KAAI,CAAC,cAJV;AAAA;;AAAA;AAAA;AAAA,oBAIJ,KAJI;AAMb,oBAAM,GAAG,GAAG,MAAM,CAAC,KAAK,CAAC,GAAP,CAAlB;AACA,oBAAM,GAAG,GAAG,MAAM,CAAC,KAAK,CAAC,GAAP,CAAlB,CAPa,CASb;AACA;;AAEA,oBAAM,OAAO,GAAG;AACd,kBAAA,IAAI,EAAE,mBADQ;AAEd,kBAAA,QAAQ,EAAE,CACR;AACE,oBAAA,IAAI,EAAE,SADR;AAEE,oBAAA,UAAU,EAAE;AACZ,sBAAA,OAAO,EAAE,KADG;AAEZ,sBAAA,QAAQ,EAAE,CAAC,EAAD,EAAK,EAAL,CAFE;AAGZ,sBAAA,SAAS,EAAE,KAAK,CAAC;AAHL,qBAFd;AAOE,oBAAA,QAAQ,EAAE;AACV,sBAAA,IAAI,EAAE,OADI;AAEV,sBAAA,WAAW,EAAE,CAAC,GAAD,EAAM,GAAN;AAFH;AAPZ,mBADQ;AAFI,iBAAhB;AAmBA,gBAAA,OAAO,CAAC,QAAR,CAAiB,OAAjB,CAAyB,UAAS,MAAT,EAAe;AAEtC,sBAAM,IAAI,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAb;AACA,kBAAA,IAAI,CAAC,SAAL,GAAiB,QAAjB;;AACA,sBAAI,KAAK,CAAC,4BAAN,KAAuC,CAA3C,EAA+C;AAC7C,oBAAA,IAAI,CAAC,KAAL,CAAW,eAAX,GAA6B,4BAA7B;AACD;;AACD,sBAAI,KAAK,CAAC,4BAAN,KAAuC,CAA3C,EAA+C;AAC7C,oBAAA,IAAI,CAAC,KAAL,CAAW,eAAX,GAA6B,6BAA7B;AACD;;AACD,sBAAI,KAAK,CAAC,4BAAN,KAAuC,CAA3C,EAA+C;AAC7C,oBAAA,IAAI,CAAC,KAAL,CAAW,eAAX,GAA6B,kCAA7B;AACD;;AACD,sBAAI,KAAK,CAAC,4BAAN,KAAuC,CAA3C,EAA+C;AAC7C,oBAAA,IAAI,CAAC,KAAL,CAAW,eAAX,GAA6B,gCAA7B;AACD;;AACD,sBAAI,KAAK,CAAC,4BAAN,KAAuC,CAA3C,EAA+C;AAC7C,oBAAA,IAAI,CAAC,KAAL,CAAW,eAAX,GAA6B,gCAA7B;AACD;;AACD,sBAAI,KAAK,CAAC,4BAAN,KAAuC,CAA3C,EAA+C;AAC7C,oBAAA,IAAI,CAAC,KAAL,CAAW,eAAX,GAA6B,0BAA7B;AACD;;AACD,sBAAI,KAAK,CAAC,4BAAN,KAAuC,CAA3C,EAA+C;AAC7C,oBAAA,IAAI,CAAC,KAAL,CAAW,eAAX,GAA6B,+BAA7B;AACD;;AAED,kBAAA,IAAI,CAAC,KAAL,CAAW,KAAX,GAAmB,MAAM,CAAC,UAAP,CAAkB,QAAlB,CAA2B,CAA3B,IAAgC,IAAnD;AACA,kBAAA,IAAI,CAAC,KAAL,CAAW,MAAX,GAAoB,MAAM,CAAC,UAAP,CAAkB,QAAlB,CAA2B,CAA3B,IAAgC,IAApD;AAEA,sBAAI,QAAQ,CAAC,MAAb,CAAoB,IAApB,EAA0B,SAA1B,CAAoC,MAAM,CAAC,QAAP,CAAgB,WAApD,EACC,QADD,CACU,IAAI,QAAQ,CAAC,KAAb,CAAmB;AAAE,oBAAA,MAAM,EAAE;AAAV,mBAAnB,EAAmC;AAAnC,mBACT,OADS,CACD,SAAS,KAAK,CAAC,WAAf,GAA6B,OAA7B,GAAuC,uBAAvC,GAAiE,KAAK,CAAC,SAAvE,GAAmF,MAAnF,GACP,qBADO,GACiB,KAAK,CAAC,OADvB,GACiC,MAFhC,CADV,EAIC,KAJD,CAIO,GAJP;AAKD,iBAlCD;AA/Ba;;AAIf,kEAAwC;AAAA;AA+DvC;AAnEc;AAAA;AAAA;AAAA;AAAA;AAoElB,WArED;AAuEA,eAAK,sBAAL,CAA4B,aAA5B,GACC,SADD,CACW,UAAA,IAAI,EAAG;AAChB,YAAA,KAAI,CAAC,iBAAL,GAAyB,IAAzB;;AADgB,wDAEQ,KAAI,CAAC,iBAFb;AAAA;;AAAA;AAAA;AAAA,oBAEL,SAFK;AAGd,oBAAM,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAX,CAAlB;AACA,oBAAM,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAX,CAAlB;AAEA,oBAAM,OAAO,GAAG;AACd,kBAAA,IAAI,EAAE,mBADQ;AAEd,kBAAA,QAAQ,EAAE,CACR;AACE,oBAAA,IAAI,EAAE,SADR;AAEE,oBAAA,UAAU,EAAE;AACZ,sBAAA,OAAO,EAAE,KADG;AAEZ,sBAAA,QAAQ,EAAE,CAAC,EAAD,EAAK,EAAL;AAFE,qBAFd;AAME,oBAAA,QAAQ,EAAE;AACV,sBAAA,IAAI,EAAE,OADI;AAEV,sBAAA,WAAW,EAAE,CAAC,GAAD,EAAM,GAAN;AAFH;AANZ,mBADQ;AAFI,iBAAhB;AAiBA,gBAAA,OAAO,CAAC,QAAR,CAAiB,OAAjB,CAAyB,UAAS,MAAT,EAAe;AACtC,sBAAM,IAAI,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAb;AACA,kBAAA,IAAI,CAAC,SAAL,GAAiB,QAAjB;AACA,kBAAA,IAAI,CAAC,KAAL,CAAW,eAAX,GAA6B,gCAA7B;AACA,kBAAA,IAAI,CAAC,KAAL,CAAW,KAAX,GAAmB,MAAM,CAAC,UAAP,CAAkB,QAAlB,CAA2B,CAA3B,IAAgC,IAAnD;AACA,kBAAA,IAAI,CAAC,KAAL,CAAW,MAAX,GAAoB,MAAM,CAAC,UAAP,CAAkB,QAAlB,CAA2B,CAA3B,IAAgC,IAApD;AAEA,sBAAI,QAAQ,CAAC,MAAb,CAAoB,IAApB,EAA0B,SAA1B,CAAoC,MAAM,CAAC,QAAP,CAAgB,WAApD,EACG,QADH,CACY,IAAI,QAAQ,CAAC,KAAb,CAAmB;AAAE,oBAAA,MAAM,EAAE;AAAV,mBAAnB,EAAmC;AAAnC,mBACT,OADS,CACD,SAAS,SAAS,CAAC,MAAnB,GAA4B,OAA5B,GAAsC,uBAAtC,GAAgE,SAAS,CAAC,SAA1E,GAAsF,MAAtF,GACP,qBADO,GACiB,SAAS,CAAC,OAD3B,GACqC,MAFpC,CADZ,EAIG,KAJH,CAIS,GAJT;AAKD,iBAZD;AAvBc;;AAEhB,qEAA+C;AAAA;AAoC9C;AAtCe;AAAA;AAAA;AAAA;AAAA;AAwCjB,WAzCD;AA6CD;AAxJH;;AAAA;AAAA,OAAA;;;;cAO+C,+DAAA,CAAA,yBAAA;;;;AAPlC,IAAA,QAAQ,GAAA,kCAAA,CAAA,YAAA,CAAA,CAAA,CALpB,MAAA,CAAA,0CAAA,CAAA,WAAA,CAAA,CAAA,CAAU;AACT,MAAA,QAAQ,EAAE,UADD;AAET,MAAA,QAAA,EAAA,kCAAA,CAAA,iBAAA,CAAA,CAAA,mBAAA;AAAA;AAAA,iFAAA,CAAA,YAFS;;;;AAAA,KAAV,CAKoB,E,uEAO0B,+DAAA,CAAA,yBAAA,C,EAP1B,CAAA,EAAR,QAAQ,CAAR","sourcesContent":["export default \"\\r\\n<app-header align=\\\"center\\\" titulo=\\\"Mapa TulcÃ¡n\\\"> </app-header>\\r\\n\\r\\n\\r\\n\\r\\n<ion-content class=\\\"noScroll\\\">\\r\\n  \\r\\n\\r\\n  <div id='map' ></div>\\r\\n\\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { MapaPage } from './mapa.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: MapaPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class MapaPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { MapaPageRoutingModule } from './mapa-routing.module';\r\n\r\nimport { MapaPage } from './mapa.page';\r\nimport { ComponentsModule } from '../../components/components.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    MapaPageRoutingModule,\r\n    ComponentsModule\r\n  ],\r\n  declarations: [MapaPage]\r\n})\r\nexport class MapaPageModule {}\r\n","export default \"#map {\\n  width: 100% !important;\\n  height: 100% !important;\\n  background-color: #f6f6f4;\\n}\\n\\n.noScroll {\\n  overflow: hidden;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbWFwYS9DOlxcSU9OSUM1XFxWaXZlVHVsY2FuXFxWaXZlVHVsY2FuL3NyY1xcYXBwXFxwYWdlc1xcbWFwYVxcbWFwYS5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL21hcGEvbWFwYS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxzQkFBQTtFQUNBLHVCQUFBO0VBQ0EseUJBQUE7QUNDSjs7QURFQTtFQUNJLGdCQUFBO0FDQ0oiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9tYXBhL21hcGEucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI21hcHtcclxuICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7XHJcbiAgICBoZWlnaHQ6IDEwMCUgIWltcG9ydGFudDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmNmY2ZjQ7XHJcbn1cclxuXHJcbi5ub1Njcm9sbCB7XHJcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgfSIsIiNtYXAge1xuICB3aWR0aDogMTAwJSAhaW1wb3J0YW50O1xuICBoZWlnaHQ6IDEwMCUgIWltcG9ydGFudDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y2ZjZmNDtcbn1cblxuLm5vU2Nyb2xsIHtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\r\nimport * as mapboxgl from 'mapbox-gl';\r\nimport { EstablecimientosService } from '../../services/establecimientos.service';\r\nimport { RespEstablecimientos, RespAtractivos } from '../../interfaces/interfaces';\r\n\r\ndeclare var mapboxgl: any;\r\n\r\n@Component({\r\n  selector: 'app-mapa',\r\n  templateUrl: './mapa.page.html',\r\n  styleUrls: ['./mapa.page.scss'],\r\n})\r\nexport class MapaPage implements OnInit {\r\n\r\n  listadoLugares : RespEstablecimientos[] = [];\r\n  listadoAtractivos: RespAtractivos[] = [];\r\n\r\n  array: [] = [];\r\n\r\n  constructor(private establecimientoService : EstablecimientosService) {\r\n\r\n  }\r\n\r\n    \r\n  ngOnInit() {\r\n\r\n    mapboxgl.accessToken = 'pk.eyJ1IjoiYnJpYW5ndGkiLCJhIjoiY2tiMzF2OGw5MDJwZjJzcWNwZHJoNXJyZiJ9.lDnbCNeuM2PZ8iWTKr4TzQ';\r\n    const map = new mapboxgl.Map({\r\n      container: 'map',\r\n      style: 'mapbox://styles/mapbox/streets-v11',\r\n      center: [-77.72006049593814, 0.8104170982511971],\r\n      zoom: 14,\r\n    });\r\n\r\n    map.addControl(\r\n      new mapboxgl.GeolocateControl({\r\n      positionOptions: {\r\n      enableHighAccuracy: true\r\n      },\r\n      trackUserLocation: true\r\n      })\r\n    );\r\n\r\n    map.on('load', () => {\r\n      map.resize();\r\n      map.addControl(new mapboxgl.NavigationControl());\r\n    });\r\n\r\n    this.establecimientoService.getEstablecimientos()\r\n    .subscribe( resp => {\r\n        // console.log('Resp',resp );\r\n        this.listadoLugares = resp;\r\n\r\n        for (const lugar of this.listadoLugares){\r\n          \r\n          const lat = Number(lugar.lat);\r\n          const lng = Number(lugar.lng);\r\n\r\n          // console.log(lat);\r\n          // console.log(lng);\r\n          \r\n          const geojson = {\r\n            type: 'FeatureCollection',\r\n            features: [\r\n              {\r\n                type: 'Feature',\r\n                properties: {\r\n                message: 'Foo',\r\n                iconSize: [40, 40],\r\n                categoria: lugar.tipo_establecimiento_id_tipo\r\n                },\r\n                geometry: {\r\n                type: 'Point',\r\n                coordinates: [lng, lat]\r\n                }\r\n              }\r\n            ]\r\n          };\r\n          \r\n\r\n          geojson.features.forEach(function(marker){\r\n\r\n            const icon = document.createElement('div');\r\n            icon.className = 'marker';\r\n            if (lugar.tipo_establecimiento_id_tipo === 1 ) {\r\n              icon.style.backgroundImage = 'url(/assets/pin/hotel.png)';\r\n            }\r\n            if (lugar.tipo_establecimiento_id_tipo === 2 ) {\r\n              icon.style.backgroundImage = 'url(/assets/pin/hostal.png)';\r\n            }\r\n            if (lugar.tipo_establecimiento_id_tipo === 3 ) {\r\n              icon.style.backgroundImage = 'url(/assets/pin/restaurante.png)';\r\n            }\r\n            if (lugar.tipo_establecimiento_id_tipo === 4 ) {\r\n              icon.style.backgroundImage = 'url(/assets/pin/cafeteria.png)';\r\n            }\r\n            if (lugar.tipo_establecimiento_id_tipo === 5 ) {\r\n              icon.style.backgroundImage = 'url(/assets/pin/discoteca.png)';\r\n            }\r\n            if (lugar.tipo_establecimiento_id_tipo === 6 ) {\r\n              icon.style.backgroundImage = 'url(/assets/pin/bar.png)';\r\n            }\r\n            if (lugar.tipo_establecimiento_id_tipo === 7 ) {\r\n              icon.style.backgroundImage = 'url(/assets/pin/complejo.png)';\r\n            }\r\n            \r\n            icon.style.width = marker.properties.iconSize[0] + 'px';\r\n            icon.style.height = marker.properties.iconSize[1] + 'px';\r\n          \r\n            new mapboxgl.Marker(icon).setLngLat(marker.geometry.coordinates)\r\n            .setPopup(new mapboxgl.Popup({ offset: 25 }) // add popups\r\n            .setHTML('<h4>' + lugar.nom_estable + '</h4>' + '<p><b>DirecciÃ³n: </b>' + lugar.direccion + '</p>'\r\n            + '<p><b>Horario: </b>' + lugar.horario + '</p>'))\r\n            .addTo(map);\r\n          });\r\n\r\n        }\r\n    });\r\n\r\n    this.establecimientoService.getatractivos()\r\n    .subscribe(resp => {\r\n      this.listadoAtractivos = resp;\r\n      for (const atractivo of this.listadoAtractivos){\r\n        const lat = Number(atractivo.lat);\r\n        const lng = Number(atractivo.lng);\r\n        \r\n        const geojson = {\r\n          type: 'FeatureCollection',\r\n          features: [\r\n            {\r\n              type: 'Feature',\r\n              properties: {\r\n              message: 'Foo',\r\n              iconSize: [40, 40],\r\n              },\r\n              geometry: {\r\n              type: 'Point',\r\n              coordinates: [lng, lat]\r\n              }\r\n            }\r\n          ]\r\n        };\r\n        \r\n        geojson.features.forEach(function(marker){\r\n          const icon = document.createElement('div');\r\n          icon.className = 'marker';\r\n          icon.style.backgroundImage = 'url(/assets/pin/atractivo.png)';\r\n          icon.style.width = marker.properties.iconSize[0] + 'px';\r\n          icon.style.height = marker.properties.iconSize[1] + 'px';\r\n\r\n          new mapboxgl.Marker(icon).setLngLat(marker.geometry.coordinates)\r\n            .setPopup(new mapboxgl.Popup({ offset: 25 }) // add popups\r\n            .setHTML('<h4>' + atractivo.nombre + '</h4>' + '<p><b>DirecciÃ³n: </b>' + atractivo.direccion + '</p>'\r\n            + '<p><b>Horario: </b>' + atractivo.horario + '</p>'))\r\n            .addTo(map);\r\n        });\r\n\r\n\r\n      }\r\n\r\n    });\r\n\r\n    \r\n\r\n  }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///","file":"pages-mapa-mapa-module-es5.js"}